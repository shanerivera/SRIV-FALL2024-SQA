#!/bin/bash

echo "==============================================================="
echo "Started pre-commit with bandit security analysis"
echo "==============================================================="

# Run Bandit
bandit -r . -o bandit_report.csv -f csv

# Check if the Bandit report was generated
if [ -f "bandit_report.csv" ]; then
  echo "Adding Bandit report..."
  git add bandit_report.csv
else
  echo "No Bandit report found."
fi

echo "==============================================================="
echo "Finished pre-commit"
echo "==============================================================="
